resolver 8.8.8.8 8.8.4.4 valid=1800s;

upstream pdfiller {
    server pf_core:8080;
}

server {
    listen 8080;
    listen [::]:8080;
    #listen 443 ssl;

    server_name local.pdfiller.dev;
    server_tokens off;
    send_timeout 60s;

    #ssl_certificate     local.pdfiller.dev.crt;
    #ssl_certificate_key local.pdfiller.dev.key;
    ssl_protocols       TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers         HIGH:!aNULL:!MD5;

    location / {
        proxy_pass http://pdfiller;

        proxy_set_header Host "localhost";
        proxy_set_header Connection "";

        proxy_intercept_errors on;
        proxy_next_upstream_tries 3;
        proxy_next_upstream_timeout 30s;
        proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504 non_idempotent;

        proxy_connect_timeout 10s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
  }
}
